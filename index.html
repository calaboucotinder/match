<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#FF4B4B">
    <meta name="description" content="Calabou√ßo - Encontre seu par ideal">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/images/icon-192x192.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/images/icon-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="/images/icon-512x512.png">
    <title>Calabou√ßo</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://kit.fontawesome.com/your-code.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Calabou√ßo">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js')
                    .then(registration => {
                        console.log('ServiceWorker registrado com sucesso:', registration.scope);
                    })
                    .catch(error => {
                        console.log('Falha ao registrar o ServiceWorker:', error);
                    });
            });
        }
    </script>
</head>
<body>
    <div id="app">
        <div id="login-screen" class="screen active">
            <h1>üßõ‚Äç‚ôÇÔ∏è Calabou√ßo Dating</h1>
            <div class="login-form">
                <input type="text" id="username" placeholder="Seu nome">
                <input type="password" id="password" placeholder="Sua senha">
                <button onclick="login()">Entrar no Calabou√ßo</button>
                <p class="register-link">N√£o tem conta? <a href="#" onclick="showRegister()">Registre-se</a></p>
            </div>
        </div>

        <div id="register-screen" class="screen">
            <h1>üßõ‚Äç‚ôÇÔ∏è Novo Membro</h1>
            <div class="register-form">
                <div class="form-group">
                    <label for="reg-name">Nome</label>
                    <input type="text" id="reg-name" placeholder="Seu nome">
                </div>
                
                <div class="form-group">
                    <label for="reg-age">Idade</label>
                    <input type="number" id="reg-age" placeholder="Sua idade">
                </div>
                
                <div class="form-group">
                    <label for="reg-gender">Identidade de G√™nero</label>
                    <select id="reg-gender">
                        <option value="cis">Cisg√™nero</option>
                        <option value="trans">Transg√™nero</option>
                        <option value="nao-binario">N√£o-bin√°rio</option>
                        <option value="genderqueer">Genderqueer</option>
                        <option value="genderfluid">G√™nero Fluido</option>
                        <option value="agenero">Ag√™nero</option>
                        <option value="bigenero">Big√™nero</option>
                        <option value="outro-genero">Outro</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="reg-pronoun">Pronome</label>
                    <select id="reg-pronoun">
                        <option value="ele/dele">ele/dele</option>
                        <option value="ela/dela">ela/dela</option>
                        <option value="elu/delu">elu/delu</option>
                        <option value="ile/dile">ile/dile</option>
                        <option value="outro">outro</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="reg-orientation">Orienta√ß√£o Sexual</label>
                    <select id="reg-orientation">
                        <option value="heterossexual">Heterossexual</option>
                        <option value="homossexual">Homossexual</option>
                        <option value="bissexual">Bissexual</option>
                        <option value="pansexual">Pansexual</option>
                        <option value="assexual">Assexual</option>
                        <option value="outro">Outro</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="reg-bio">Bio</label>
                    <textarea id="reg-bio" placeholder="Fale um pouco sobre voc√™..."></textarea>
                </div>
                
                <div class="form-group">
                    <label for="reg-password">Senha</label>
                    <input type="password" id="reg-password" placeholder="Sua senha">
                </div>
                
                <div class="form-group">
                    <label for="reg-confirm-password">Confirmar Senha</label>
                    <input type="password" id="reg-confirm-password" placeholder="Confirme sua senha">
                </div>
                
                <div class="form-group">
                    <label for="reg-photo">Foto de Perfil (opcional)</label>
                    <input type="file" id="reg-photo" accept="image/*">
                </div>
                
                <button onclick="register()">Criar Conta</button>
                <p class="login-link">J√° tem conta? <a href="#" onclick="showLogin()">Fa√ßa login</a></p>
            </div>
        </div>

        <div id="main-screen" class="screen">
            <nav class="menu">
                <button class="menu-item active" onclick="showSection('swipe')">
                    <i class="fas fa-fire"></i>
                    <span>Swipe</span>
                </button>
                <button class="menu-item" onclick="showSection('matches')">
                    <i class="fas fa-heart"></i>
                    <span>Matches</span>
                </button>
                <button class="menu-item" onclick="showSection('chats')">
                    <i class="fas fa-comments"></i>
                    <span>Chats</span>
                </button>
                <button class="menu-item" onclick="showSection('profile')">
                    <i class="fas fa-user"></i>
                    <span>Perfil</span>
                </button>
            </nav>

            <div id="swipe-section" class="section active">
                <div class="swipe-card">
                    <div class="swipe-photo" id="current-photo" style="background-image: url('path/to/default.jpg');">
                        <div class="swipe-info">
                            <h2 class="name">Nome do Usu√°rio</h2>
                            <p class="age">25 anos</p>
                            <p class="pronoun">Ele/Dele</p>
                            <p class="orientation">Heterossexual</p>
                            <div class="interests-tags">
                                <!-- Tags ser√£o inseridas via JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>
                <div class="swipe-actions">
                    <button class="swipe-button dislike" onclick="dislike()">
                        <i class="fas fa-times"></i>
                    </button>
                    <button class="swipe-button like" onclick="like()">
                        <i class="fas fa-heart"></i>
                    </button>
                </div>
            </div>

            <div id="matches-section" class="section">
                <h2>Seus Matches</h2>
                <div class="matches-grid">
                    <!-- Exemplo de match card -->
                    <div class="match-card" onclick="openChat('user-id')">
                        <div class="match-photo" style="background-image: url('path/to/photo.jpg');">
                            <div class="match-info">
                                <h3>Nome</h3>
                                <p>25 anos</p>
                            </div>
                        </div>
                    </div>
                    <!-- Mais cards ser√£o inseridos via JavaScript -->
                </div>
            </div>

            <div id="chats-section" class="section">
                <h2>Conversas</h2>
                <div class="chats-list"></div>
                <div class="chat-container">
                    <div class="chat-messages"></div>
                    <div class="typing-indicator" style="display: none;">
                        <span>Digitando</span>
                        <div class="typing-dots">
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                        </div>
                    </div>
                    <div class="media-upload">
                        <input type="file" id="media-input" accept="image/*,video/*" multiple style="display: none;">
                        <button onclick="document.getElementById('media-input').click()">
                            <i class="fas fa-image"></i> Adicionar m√≠dia
                        </button>
                        <div class="media-preview-container"></div>
                    </div>
                    <div class="chat-input">
                        <input type="text" placeholder="Digite sua mensagem...">
                        <button class="media-button">
                            <i class="fas fa-image"></i>
                        </button>
                        <button class="audio-button">
                            <i class="fas fa-microphone"></i>
                        </button>
                        <button class="send-button">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                        <input type="file" accept="image/*,video/*" style="display: none;">
                        <div class="media-preview"></div>
                    </div>
                </div>
            </div>

            <div id="profile-section" class="section">
                <div class="profile-container">
                    <div class="profile-photo"></div>
                    <h2 class="profile-name"></h2>
                    <div class="profile-info">
                        <div class="profile-info-item">
                            <div class="profile-info-label">Idade:</div>
                            <div class="profile-info-value" id="profile-age"></div>
                        </div>
                        <div class="profile-info-item">
                            <div class="profile-info-label">Identidade de G√™nero:</div>
                            <div class="profile-info-value" id="profile-gender"></div>
                        </div>
                        <div class="profile-info-item">
                            <div class="profile-info-label">Pronome:</div>
                            <div class="profile-info-value" id="profile-pronoun"></div>
                        </div>
                        <div class="profile-info-item">
                            <div class="profile-info-label">Orienta√ß√£o Sexual:</div>
                            <div class="profile-info-value" id="profile-orientation"></div>
                        </div>
                        <div class="profile-info-item">
                            <div class="profile-info-label">Status de Relacionamento:</div>
                            <div class="profile-info-value" id="profile-relationship"></div>
                        </div>
                        <div class="profile-info-item">
                            <div class="profile-info-label">Bio:</div>
                            <div class="profile-info-value" id="profile-bio"></div>
                        </div>
                        <div class="profile-info-item">
                            <div class="profile-info-label">Informa√ß√µes Adicionais:</div>
                            <div class="profile-info-value" id="profile-additional"></div>
                        </div>
                        <div class="interests-tags"></div>
                    </div>
                    
                    <div class="photo-album">
                        <h3>√Ålbum de Fotos</h3>
                        <div class="album-controls">
                            <button class="add-photo-btn" onclick="showAddPhotoModal()"><i class="fas fa-plus"></i> Adicionar Foto</button>
                            <div class="album-filter">
                                <button class="filter-btn active" data-filter="public">P√∫blicas</button>
                                <button class="filter-btn" data-filter="private">Privadas</button>
                            </div>
                        </div>
                        <div class="album-grid" id="public-album"></div>
                        <div class="album-grid private" id="private-album" style="display: none;"></div>
                    </div>
                    
                    <div class="profile-actions">
                        <button class="edit-btn" onclick="editProfile()"><i class="fas fa-edit"></i> Editar Perfil</button>
                        <button class="manage-requests-btn" onclick="showManageRequestsModal()"><i class="fas fa-user-lock"></i> Solicita√ß√µes de Acesso</button>
                        <button onclick="logout()" class="logout-btn">Sair</button>
                    </div>
                    <div class="analytics-container">
                        <div class="analytics-card">
                            <h3 class="analytics-title">Estat√≠sticas de Matches</h3>
                            <div class="analytics-value" id="total-matches">0</div>
                            <div class="analytics-chart" id="matches-chart"></div>
                        </div>
                        <div class="profile-insights">
                            <div class="insight-card">
                                <div class="insight-icon"><i class="fas fa-eye"></i></div>
                                <div class="insight-value" id="profile-views">0</div>
                                <div class="insight-label">Visualiza√ß√µes</div>
                            </div>
                            <div class="insight-card">
                                <div class="insight-icon"><i class="fas fa-heart"></i></div>
                                <div class="insight-value" id="total-likes">0</div>
                                <div class="insight-label">Curtidas</div>
                            </div>
                            <div class="insight-card">
                                <div class="insight-icon"><i class="fas fa-comments"></i></div>
                                <div class="insight-value" id="total-messages">0</div>
                                <div class="insight-label">Mensagens</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="edit-profile-screen" class="screen">
            <div class="edit-profile-header">
                <button class="back-btn" onclick="backToProfile()">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <h2>Editar Perfil</h2>
            </div>
            <div class="edit-profile-form">
                <div class="profile-photo-upload">
                    <div class="profile-photo" id="preview-photo" style="background-image: url('path/to/profile.jpg');"></div>
                    <label for="edit-photo" class="upload-btn">
                        <i class="fas fa-camera"></i>
                        Alterar Foto
                    </label>
                    <input type="file" id="edit-photo" accept="image/*" style="display: none;">
                </div>
                
                <div class="form-group">
                    <label for="edit-name">Nome</label>
                    <input type="text" id="edit-name" placeholder="Seu nome">
                </div>
                
                <div class="form-group">
                    <label for="edit-age">Idade</label>
                    <input type="number" id="edit-age" placeholder="Sua idade">
                </div>
                
                <div class="form-group">
                    <label for="edit-gender">Identidade de G√™nero</label>
                    <select id="edit-gender">
                        <option value="cis">Cisg√™nero</option>
                        <option value="trans">Transg√™nero</option>
                        <option value="nao-binario">N√£o-bin√°rio</option>
                        <option value="genderqueer">Genderqueer</option>
                        <option value="genderfluid">G√™nero Fluido</option>
                        <option value="agenero">Ag√™nero</option>
                        <option value="bigenero">Big√™nero</option>
                        <option value="outro-genero">Outro</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="edit-pronoun">Pronome</label>
                    <select id="edit-pronoun">
                        <option value="ele/dele">ele/dele</option>
                        <option value="ela/dela">ela/dela</option>
                        <option value="elu/delu">elu/delu</option>
                        <option value="ile/dile">ile/dile</option>
                        <option value="outro">outro</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="edit-orientation">Orienta√ß√£o Sexual</label>
                    <select id="edit-orientation">
                        <option value="heterossexual">Heterossexual</option>
                        <option value="homossexual">Homossexual</option>
                        <option value="bissexual">Bissexual</option>
                        <option value="pansexual">Pansexual</option>
                        <option value="assexual">Assexual</option>
                        <option value="outro">Outro</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="edit-bio">Bio</label>
                    <textarea id="edit-bio" placeholder="Fale um pouco sobre voc√™..."></textarea>
                </div>
                
                <button class="save-btn" onclick="saveProfile()">
                    Salvar Altera√ß√µes
                </button>
            </div>
        </div>

        <div id="match-screen" class="screen">
            <h2>üéâ √â MATCH! üéâ</h2>
            <div class="match-profiles">
                <div class="profile"></div>
                <div class="profile"></div>
            </div>
            <button onclick="startChat()">Iniciar Conversa</button>
        </div>

        <div id="chat-screen" class="screen">
            <div class="chat-header">
                <button class="back-button" onclick="backToMain()">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="user-info">
                    <div class="user-photo" id="chat-user-photo"></div>
                    <div class="user-name" id="chat-user-name"></div>
                </div>
            </div>
            <div class="chat-messages" id="chat-messages">
                <!-- As mensagens ser√£o adicionadas aqui dinamicamente -->
            </div>
            <div class="typing-indicator" id="typing-indicator" style="display: none;">
                <span>Digitando</span>
                <div class="typing-dots">
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                </div>
            </div>
            <div class="chat-input-container">
                <div class="chat-input-wrapper">
                    <div class="media-upload">
                        <input type="file" id="chat-media-input" accept="image/*,video/*" multiple style="display: none;">
                        <button onclick="document.getElementById('chat-media-input').click()">
                            <i class="fas fa-image"></i>
                        </button>
                        <div class="media-preview-container" id="chat-media-preview"></div>
                    </div>
                    <div class="chat-input">
                        <input type="text" id="chat-message-input" placeholder="Digite sua mensagem...">
                        <button onclick="sendChatMessage()">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal para adicionar foto -->
        <div id="add-photo-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Adicionar Foto ao √Ålbum</h3>
                    <button class="close-modal" onclick="closeAddPhotoModal()">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="photo-upload">Selecione uma foto</label>
                        <input type="file" id="photo-upload" accept="image/*">
                    </div>
                    <div class="form-group">
                        <label for="photo-privacy">Privacidade</label>
                        <select id="photo-privacy">
                            <option value="public">P√∫blica</option>
                            <option value="private">Privada</option>
                        </select>
                        <small>Voc√™ pode ter at√© 4 fotos p√∫blicas e 5 fotos privadas.</small>
                    </div>
                    <div class="form-group">
                        <label for="photo-description">Descri√ß√£o (opcional)</label>
                        <textarea id="photo-description" placeholder="Descreva sua foto..."></textarea>
                    </div>
                    <button class="save-btn" onclick="addPhotoToAlbum()">Adicionar Foto</button>
                </div>
            </div>
        </div>
        
        <!-- Modal para visualizar foto -->
        <div id="view-photo-modal" class="modal">
            <div class="modal-content photo-viewer">
                <div class="modal-header">
                    <h3 id="photo-title">Visualizar Foto</h3>
                    <button class="close-modal" onclick="closeViewPhotoModal()">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="photo-container">
                        <img id="full-photo" src="" alt="Foto do perfil">
                        <div class="photo-overlay">
                            <div class="photo-info">
                                <p id="photo-description-display"></p>
                                <p id="photo-date"></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Modal para solicitar acesso a fotos privadas -->
        <div id="request-access-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Solicitar Acesso</h3>
                    <button class="close-modal" onclick="closeRequestAccessModal()">&times;</button>
                </div>
                <div class="modal-body">
                    <p>Voc√™ est√° solicitando acesso ao √°lbum privado. O usu√°rio ser√° notificado e poder√° aprovar ou negar sua solicita√ß√£o.</p>
                    <div class="form-group">
                        <label for="request-message">Mensagem (opcional)</label>
                        <textarea id="request-message" placeholder="Escreva uma mensagem para o usu√°rio..."></textarea>
                    </div>
                    <button class="save-btn" onclick="sendAccessRequest()">Enviar Solicita√ß√£o</button>
                </div>
            </div>
        </div>

        <!-- Modal para gerenciar solicita√ß√µes de acesso -->
        <div id="manage-requests-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Solicita√ß√µes de Acesso</h3>
                    <button class="close-modal" onclick="closeManageRequestsModal()">&times;</button>
                </div>
                <div class="modal-body">
                    <div id="requests-list">
                        <!-- As solicita√ß√µes ser√£o adicionadas aqui dinamicamente -->
                    </div>
                    <div id="no-requests-message" style="display: none;">
                        <p>N√£o h√° solicita√ß√µes de acesso pendentes.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Chat Screen -->
        <div class="chat-screen">
            <div class="chat-header">
                <button class="back-button"><i class="fas fa-arrow-left"></i></button>
                <div class="chat-user-info">
                    <img src="" alt="Foto do usu√°rio" class="chat-user-photo">
                    <div class="chat-user-details">
                        <h3 class="chat-user-name"></h3>
                        <span class="chat-user-status"></span>
                    </div>
                </div>
            </div>
            <div class="chat-messages"></div>
            <div class="typing-indicator">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <div class="chat-input">
                <button type="button" class="media-button" title="Anexar m√≠dia">
                    <i class="fas fa-image"></i>
                </button>
                <input type="file" class="media-input" accept="image/*,video/*" multiple hidden>
                <button type="button" class="audio-button" data-action="audio" title="Gravar √°udio">
                    <i class="fas fa-microphone"></i>
                </button>
                <input type="text" placeholder="Digite sua mensagem...">
                <button type="submit" title="Enviar mensagem">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
            <div class="media-preview"></div>
        </div>
    </div>
    <script src="app.js"></script>
</body>
</html> 